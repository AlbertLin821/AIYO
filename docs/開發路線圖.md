# 開發路線圖

**文件版本**：1.0  
**建立日期**：2026-02-14  
**適用專案**：AIYO 愛遊互動式旅遊網站

---

## 1. 文件目的

本文件提供 AIYO 愛遊專案的開發時程規劃與各階段技術重點，作為開發團隊的工作指南。

---

## 2. 開發時間表（7 週規劃）

### Week 1–2：影片索引原型

#### 目標

- 能選 50–100 支影片，跑完字幕→片段→景點→寫入 pgvector
- 建立完整的影片索引流程

#### 技術重點

1. **YouTube API 整合**：
   - 實作影片搜尋功能
   - 取得影片 metadata
   - 下載字幕（SRT/VTT）

2. **Whisper 整合**：
   - 若無字幕，使用 Whisper 轉文字
   - 取得時間戳記

3. **Embedding 與分段**：
   - 使用 sentence-transformers 產生 embedding
   - 實作語意分段演算法
   - 景點實體抽取（NER + LLM）

4. **資料庫設計**：
   - 建立 PostgreSQL + pgvector
   - 設計資料表結構
   - 建立向量索引

#### 交付項目

- [ ] YouTube API 整合腳本
- [ ] Whisper 轉文字腳本
- [ ] 語意分段演算法
- [ ] 資料庫 Schema
- [ ] 至少 50 支影片的索引資料

#### 技術棧

- Python 3.10+
- YouTube Data API v3
- Whisper API / 自架 Whisper
- sentence-transformers
- PostgreSQL + pgvector
- jieba / spaCy（中文斷詞）

---

### Week 3–4：RAG + 對話後端

#### 目標

- FastAPI 建立 /api/chat，整合 vLLM（先本地或少量 GPU）
- 實作 Tool-usage/Recommendation/Planning/Memory 四大模組

#### 技術重點

1. **FastAPI 架構**：
   - 建立 API Gateway
   - 實作 RESTful API 端點
   - WebSocket 支援串流回應

2. **vLLM / Ollama 整合**：
   - 本地部署 Qwen3-8B 或 Llama3.3-8B
   - 實作 OpenAI-compatible API
   - 測試模型效能

3. **RAG 實作**：
   - Query Embedding
   - pgvector 向量搜尋
   - Context 整合與 LLM 生成

4. **Tool-calling 實作**：
   - `search_segments` 工具
   - `plan_itinerary` 工具
   - Tool 結果整合

5. **四大模組實作**：
   - **Tool-usage**：工具呼叫邏輯
   - **Recommendation**：推薦演算法
   - **Planning**：行程規劃邏輯
   - **Memory**：對話記憶管理（Redis）

#### 交付項目

- [ ] FastAPI 後端服務
- [ ] vLLM / Ollama 整合
- [ ] RAG 檢索功能
- [ ] Tool-calling 實作
- [ ] 四大模組基本功能
- [ ] API 文件（Swagger）

#### 技術棧

- Python + FastAPI
- vLLM / Ollama
- PostgreSQL + pgvector
- Redis
- OpenAI Python SDK（相容 vLLM）

---

### Week 5–6：前端 UI

#### 目標

- Next.js + Tailwind + shadcn，做出完整的使用者介面
- 實作語音輸入、Chat UI、片段卡片、地圖與行程視覺化

#### 技術重點

1. **Next.js 專案架構**：
   - App Router 設定
   - 路由設計
   - SSR/ISR 設定

2. **UI 元件開發**：
   - 使用 shadcn/ui 元件庫
   - 自訂 Chat UI 元件
   - 片段卡片設計
   - 行程時間軸視覺化

3. **語音輸入功能**：
   - Web Speech API 整合
   - 語音轉文字顯示
   - 語音按鈕 UI

4. **影片播放整合**：
   - YouTube Player API
   - 片段跳轉功能
   - 影片牆設計

5. **地圖整合**：
   - Google Maps API
   - 景點標記
   - 路線顯示

6. **即時通訊**：
   - WebSocket 串流回應
   - 即時更新行程

#### 交付項目

- [ ] Next.js 前端專案
- [ ] 首頁設計
- [ ] Chat UI 完整功能
- [ ] 語音輸入功能
- [ ] 片段卡片與播放
- [ ] 地圖與行程視覺化
- [ ] 響應式設計（Mobile First）

#### 技術棧

- Next.js 14
- React + TypeScript
- Tailwind CSS
- shadcn/ui
- Web Speech API
- YouTube Player API
- Google Maps API
- Socket.io Client

---

### Week 7：MVP 部署

#### 目標

- Railway / Render + Supabase + Upstash（省錢）
- 小規模使用者 internal test

#### 技術重點

1. **部署準備**：
   - 環境變數設定
   - Docker 容器化（可選）
   - 資料庫遷移腳本

2. **前端部署**：
   - Vercel / Railway 部署 Next.js
   - 環境變數設定
   - 域名設定

3. **後端部署**：
   - Railway / Render 部署 FastAPI
   - 資料庫連線設定
   - Redis 連線設定

4. **資料庫部署**：
   - Supabase PostgreSQL
   - pgvector 擴充安裝
   - 資料遷移

5. **監控與日誌**：
   - 基本錯誤監控
   - 日誌收集
   - 效能監控

6. **測試**：
   - 功能測試
   - 效能測試
   - 使用者測試

#### 交付項目

- [ ] 生產環境部署
- [ ] 域名與 SSL 設定
- [ ] 監控系統
- [ ] 部署文件
- [ ] 測試報告

#### 技術棧

- Railway / Render
- Vercel（前端）
- Supabase（PostgreSQL）
- Upstash（Redis）
- 監控工具（可選）

---

### 後續：K8s + vLLM Scale

#### 目標

- 若有實際使用量，再導入 EKS/GKE
- 擴展 GPU 資源
- 優化效能與成本

#### 技術重點

1. **Kubernetes 部署**：
   - 建立 K8s 集群
   - 部署 vLLM 服務
   - 設定 HPA（自動擴展）

2. **效能優化**：
   - 模型量化
   - 快取策略
   - 批次處理

3. **監控與維運**：
   - Prometheus + Grafana
   - 日誌聚合
   - 告警設定

---

## 3. 各階段檢查點

### Week 2 檢查點

- [ ] 能成功索引至少 50 支影片
- [ ] 片段切割準確率 > 70%
- [ ] 景點抽取準確率 > 60%

### Week 4 檢查點

- [ ] API 端點正常運作
- [ ] RAG 檢索相關度 > 70%
- [ ] Tool-calling 成功率 > 80%
- [ ] 回應時間 < 5 秒

### Week 6 檢查點

- [ ] 前端所有功能正常
- [ ] 語音輸入可用
- [ ] 影片播放正常
- [ ] 地圖顯示正確
- [ ] 響應式設計完成

### Week 7 檢查點

- [ ] 生產環境部署成功
- [ ] 基本功能測試通過
- [ ] 效能符合需求
- [ ] 至少 5 位使用者測試完成

---

## 4. 風險管理

### 技術風險

1. **模型效能不如預期**：
   - **緩解**：提前測試多個模型，準備備案
   - **時程緩衝**：預留 1 週調整時間

2. **API 限制**：
   - **緩解**：了解各 API 配額，實作重試機制
   - **時程緩衝**：預留處理時間

3. **資料庫效能**：
   - **緩解**：提前測試大量資料，優化查詢
   - **時程緩衝**：預留優化時間

### 時程風險

1. **開發進度延遲**：
   - **緩解**：每週檢視進度，及時調整
   - **備案**：優先完成核心功能，次要功能可延後

2. **整合問題**：
   - **緩解**：提前整合測試，及早發現問題
   - **時程緩衝**：預留整合測試時間

---

## 5. 資源需求

### 人力配置

- **前端開發**：1–2 人
- **後端開發**：1–2 人
- **AI/ML 開發**：1 人
- **UI/UX 設計**：1 人（可兼職）

### 硬體需求

- **開發用電腦**：至少 16GB RAM，建議有 GPU
- **測試伺服器**：雲端 GPU 實例（開發階段）

### 軟體工具

- **開發工具**：VS Code, Git
- **設計工具**：Figma（可選）
- **專案管理**：GitHub Projects / Trello

---

## 6. 里程碑定義

### 里程碑 1：影片索引完成（Week 2）

- 完成影片索引流程
- 至少 50 支影片已索引
- 資料庫結構建立完成

### 里程碑 2：後端 API 完成（Week 4）

- 所有 API 端點實作完成
- RAG 與 Tool-calling 功能正常
- 基本測試通過

### 里程碑 3：前端 UI 完成（Week 6）

- 所有 UI 元件完成
- 功能整合完成
- 響應式設計完成

### 里程碑 4：MVP 上線（Week 7）

- 生產環境部署完成
- 使用者測試完成
- 基本問題修復完成

---

## 7. 後續優化方向

### 功能優化

- 提升片段切割準確率
- 優化行程規劃演算法
- 增強 AI 對話能力
- 新增多人共編功能

### 效能優化

- 優化資料庫查詢
- 實作更完善的快取策略
- 優化模型推理速度
- CDN 整合

### 使用者體驗

- A/B 測試不同 UI 設計
- 收集使用者回饋
- 持續優化流程
- 新增教學與引導

---

## 8. 參考文件

- [使用者需求規格書.md](./使用者需求規格書.md) - 功能需求
- [系統需求規格書.md](./系統需求規格書.md) - 技術架構
- [技術實作指南.md](./技術實作指南.md) - 技術細節
- [部署與成本評估.md](./部署與成本評估.md) - 成本分析
