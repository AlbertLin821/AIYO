# 階段零檢查報告

**檢查日期**：2026-02-21  
**專案**：AIYO 愛遊

---

## 1. Docker 環境

| 服務 | 狀態 | 備註 |
|------|------|------|
| PostgreSQL (aiyo-postgres) | 已啟動，healthy | 埠 5432 |
| Redis (aiyo-redis) | 已啟動，healthy | 埠 6379 |
| Ollama (ollama) | 已啟動 | 埠 11434 |
| pgAdmin (aiyo-pgadmin) | 已啟動 | 埠 5050 |

**結論**：Docker Compose 服務皆正常運行。

---

## 2. 資料庫連線

| 檢查項目 | 結果 |
|----------|------|
| PostgreSQL 連線 | 正常 (`pg_isready` 通過) |
| Redis 連線 | 正常 (`PING` 回傳 PONG) |
| 資料表 | videos、segments、places、segment_places 已存在 |
| pgvector 擴充 | 已包含於 init-db.sql |

**備註**：itineraries、itinerary_days、itinerary_slots 表若尚未建立，可執行 `scripts/migrations/002_itineraries.sql`（階段二前需完成）。

---

## 3. 環境變數

依據 `.env.example`，必要變數包括：

- `DATABASE_URL`：PostgreSQL 連線字串
- `YOUTUBE_API_KEY`：YouTube Data API v3 金鑰（影片搜尋必需）
- `REDIS_URL`：Redis 連線（階段二使用）
- `OLLAMA_BASE_URL`、`OLLAMA_MODEL`：LLM 服務（階段二使用）
- `GOOGLE_MAPS_API_KEY`：地圖 API（階段二使用）

**請確認**：`.env` 中的 `YOUTUBE_API_KEY` 已填入實際金鑰（非 `your_youtube_api_key_here`），否則 YouTube 搜尋腳本無法執行。

---

## 4. 開發環境

| 項目 | 狀態 |
|------|------|
| Python | 3.10.11 已安裝 |
| video-indexer .venv | 已建立 |
| 基本依賴 | google-api-python-client、python-dotenv、psycopg2-binary 已安裝 |

**後續**：進行 Whisper、Embedding 等功能時，需再執行 `pip install -r requirements.txt` 安裝完整依賴。

---

## 5. 階段零檢查清單對照

依據 `myTODO.md` 階段零：

- [x] 啟動 `docker compose up -d`，確認 PostgreSQL、Redis、Ollama 正常運行
- [x] video-indexer：建立 `.venv`、安裝基本依賴
- [ ] API 金鑰：YouTube、Google Maps 等需自行申請並填入 `.env`
- [ ] Ollama 模型：需執行 `ollama pull qwen2.5:7b-instruct` 等（階段二前）

---

## 6. 建議下一步

1. **若尚未設定**：於 `.env` 填入 `YOUTUBE_API_KEY`
2. **執行 YouTube 搜尋腳本**：`cd video-indexer && python scripts/search_youtube.py --dry-run` 測試，確認無誤後移除 `--dry-run` 正式寫入
3. **繼續階段一**：完成字幕取得、Whisper、Embedding 與語意分段等模組
